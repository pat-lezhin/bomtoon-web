/* ─────────────────────────────────────────
   글로벌 변수
───────────────────────────────────────── */
:root{
  --app-h: 100svh;         /* 모바일 주소창 보정용 */
  --brand:#0a84ff;
  --badge:#ff3b30;
}

html, body{
  height:100%; margin:0;
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial;
  background:#0b0f17; color:#e5e7eb;
}

/* ─────────────────────────────────────────
   Stage (배경/중앙정렬/세이프에어리어)
───────────────────────────────────────── */
.stage{
  min-height: var(--app-h);
  display: grid;
  place-items: center;
  padding: clamp(12px, 3vw, 28px);
  padding-left:  max(clamp(12px, 3vw, 28px), env(safe-area-inset-left));
  padding-right: max(clamp(12px, 3vw, 28px), env(safe-area-inset-right));
  padding-top:   max(clamp(12px, 3vw, 28px), env(safe-area-inset-top));
  padding-bottom:max(clamp(12px, 3vw, 28px), env(safe-area-inset-bottom));
  position: relative;
  isolation: isolate;
  overflow: hidden;
  background:#0b0f17;
}

.stage::before{
  content:"";
  position:absolute; inset:-24px;
  background:url("../assets/bg/page.jpg") center/cover no-repeat;
  filter: blur(2px) saturate(1.05);
  transform: scale(1.02);
  z-index:-1;
}

/* ─────────────────────────────────────────
   Device wrapper (스케일로 뷰포트에 맞춤)
/* ── 레이아웃 크기는 스케일 반영 */
.device-wrap{
  /* 스케일된 실제 너비/높이를 레이아웃에 반영 */
  width:  calc(390px * var(--phone-scale, 1));
  height: calc(844px * var(--phone-scale, 1));

  /* 중앙 정렬은 stage 그리드에 맡기되, wrap 자체 크기가 정확해야 함 */
  .device-wrap { display:grid; place-items:center; }  /* 유지 */
  place-items: center;

  filter: drop-shadow(0 26px 38px rgba(0,0,0,.45));
}

/* ── 시각적 스케일은 안쪽에만 적용 (기존 그대로) */
.iphone{
  position: relative;

  /* 기준 크기 = 프레임 바깥까지 포함한 총 크기로 사용하려면 box-sizing 필요 */
  width: 390px;
  height: 844px;

  /* ✅ padding/border를 width/height에 포함 */
  box-sizing: border-box;

  /* 스케일은 내부에만 */
  transform: scale(var(--phone-scale, 1));
  transform-origin: top left;

  border-radius: 56px;
  padding: 18px;
  background: #151821;
  border: 10px solid #0e1117;
}


/* 화면 레이어는 꽉 채우기(기존과 동일) */
.screen{
  position: absolute;
  inset: 0;
  border-radius: 38px;
  overflow: hidden;
  background: #1e1e2f;
}

/* Status bar */
.statusbar{
  position:absolute; top:8px; left:0; right:0;
  display:flex; justify-content:space-between;
  padding:8px 16px; font-size:12px;
  z-index: 10; /* 👈 Z-depth 설정으로 화면 앞/뒤로 보낼수 있음 */
}

/* ─────────────────────────────────────────
   Lock
───────────────────────────────────────── */
.lock{
  position:absolute; inset:0;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  background:url("../assets/bg/lockscreen.jpg") center/cover no-repeat;
  color:#fff;
}
.lock .clock{ font-size:72px; font-weight:300; }
.lock .date{ margin-top:8px; font-size:14px; opacity:.9; }
.lock .hint{ position:absolute; bottom:24px; font-size:12px; opacity:.7; }

/* ─────────────────────────────────────────
   Home
───────────────────────────────────────── */
.home{
  position:absolute; inset:0;
  padding:64px 18px 24px;
  background:url("../assets/bg/lockscreen.jpg") center/cover no-repeat;
  color:#fff;
}
.home .grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:16px;
  margin-top:24px;
}

/* 앱 타일(버튼) – 기본 스타일 제거 */
.app-tile{
  -webkit-appearance:none; appearance:none;
  background:transparent; border:0; padding:0; margin:0;
  display:flex; flex-direction:column; align-items:center; gap:6px;
  color:#fff; cursor:pointer;
}
.app-tile:focus-visible{
  outline:2px solid rgba(255,255,255,.6);
  outline-offset:4px; border-radius:12px;
}
.app-tile:active .icon{ transform:scale(0.96); }

/* 아이콘 박스 */
.icon{
  width:64px; height:64px;
  /* 둥글게 자를 필요 없으면 아래 두 줄 주석 상태 유지 */
  /* border-radius:18px; */
  /* overflow:hidden; */
  border:none; box-shadow:none; display:grid; place-items:center;
}
.icon :where(svg){ width:100%; height:100%; display:block; }  /* 인라인 SVG */
.icon img{ width:100%; height:100%; object-fit:cover; display:block; background:transparent; } /* img 사용시 */

/* ─────────────────────────────────────────
   QA 버튼
───────────────────────────────────────── */
.qa-back{
  position:fixed; top:16px; left:16px; z-index:1000;
  width:40px; height:40px; border-radius:10px;
  border:1px solid rgba(255,255,255,.25);
  background:rgba(0,0,0,.45); color:#fff;
  display:grid; place-items:center;
  backdrop-filter:blur(6px); cursor:pointer;
}
.qa-back:active{ transform:translateY(1px); }
.qa-only{ display:none; }
body[data-qa="true"] .qa-only{ display:block; }

/* ─────────────────────────────────────────
   Lock
───────────────────────────────────────── */
.lock{
  position:absolute; inset:0;
  display:flex; flex-direction:column; align-items:center;
  background:url("../assets/bg/lockscreen.jpg") center/cover no-repeat;
  color:#fff;
}
/* 👇 [수정] 시계, 날짜 스타일을 프로토타입과 유사하게 변경합니다. */
.lock .clock{ 
  margin-top: -460px;
  font-size: 92px; 
  font-weight: 300; 
  letter-spacing: 1px;
  line-height: .9;
  text-shadow:0 6px 24px rgba(0,0,0,.45); 
}
.lock .date{ 
  margin-top:8px; 
  font-size:14px; 
  opacity:.95; 
  text-shadow:0 2px 8px rgba(0,0,0,.45);
}
/* 👇 [수정] 잠금화면 파라미터 수정 합니다.. */
.lock .hint{ 
  position:absolute; 
  bottom:750px; 
  left:0; 
  right:0; 
  text-align:center; 
  font-size:12px; 
  opacity:.9; }

/* 👇 [추가] 알림 스타일을 여기에 추가합니다. */
.lock .notif-wrap{ 
  position:absolute; 
  left:0; 
  right:0; 
  top:280px; 
  bottom:80px; 
  padding:0 16px; 
}
.lock .notif-stack{ 
  height:100%; 
  overflow:auto; 
  padding:2px 2px 10px; 
  mask-image: linear-gradient(transparent, #000 8%, #000 92%, transparent); 
}
.notif{ 
  background:rgba(255,255,255,.9); 
  color:#111; 
  border-radius:16px; 
  padding:12px 14px; 
  display:grid; 
  gap:2px; 
  box-shadow:0 6px 18px rgba(0,0,0,.25); 
  margin:10px 6px; 
}
.notif .t{ font-weight:700; font-size:13px; }
.notif .d{ font-size:12px; color:#374151; }

/* ===== Unlock animation (잠금 화면 애니메이션) ===== */
@keyframes unlockUp { 
  from { transform: translateY(0); opacity:1; } 
  to { transform: translateY(-40px); opacity:0; } 
}
@keyframes homeIn { 
  from { opacity:0; transform: scale(.98); filter: blur(2px); } 
  to { opacity:1; transform: scale(1); filter: blur(0); } 
}
.lock.unlocking{ animation: unlockUp .25s ease both; }
.home.show{ animation: homeIn .25s ease both; }

/* hidden 속성이 확실히 적용되도록 강제합니다. */
.home[hidden]{ display:none !important; }